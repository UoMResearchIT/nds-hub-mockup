<!DOCTYPE html>
<html>
<head>
  <title>NERC Digital Solutions Hub</title>
  <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">

  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900">
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/@mdi/font@6.x/css/materialdesignicons.min.css">
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css">

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.2/leaflet.css">

  <link rel="stylesheet" type="text/css" href="css/index.css">

  <script src="https://cdn.jsdelivr.net/npm/vue@2.x/dist/vue.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js"></script>

  <script type="text/javascript" src="js/app-state.js"></script>
</head>

<body>
  
  <div id="app-container" >

    <v-app id="app">
      <v-app-bar  id="app-bar"
                  class="secondary--text"
                  clipped-left
                  color="primary"
                  dark
                  dense
                  flat
                  app>
        <v-app-bar-nav-icon></v-app-bar-nav-icon>
        <v-toolbar-title>NERC Digital Solutions Hub</v-toolbar-title>
        <v-spacer></v-spacer>
        <v-btn  class="secondary--text"
                color="primary">
          <v-icon>mdi-magnify</v-icon>
           Search
        </v-btn>
        <!-- <v-btn  class="secondary--text"
                color="primary">
          <v-icon>mdi-login</v-icon>
          {{ userLoginButtonText }}
        </v-btn> -->
        <!-- <login-btn></login-btn> -->

        
        <v-dialog v-model="login.isLoginDialogOpen"
                  persistent
                  max-width="600px"
                  value="true">

          <template v-slot:activator="{ on, attrs }">
            <v-btn  class="secondary--text"
                    color="primary"
                    v-bind="attrs"
                    v-on="on">
              <v-icon>mdi-login</v-icon>
              {{ getUserLoginButtonText() }}
            </v-btn>
          </template>

          <v-card v-show="!isUserLoggedIn()">
            <v-card-title>
              <span class="text-h5">User Login</span>
            </v-card-title>
            <v-card-text>
              <v-container>
                <v-row>
                  <v-text-field label="Username"
                                required
                                v-model="login.username"
                                v-on:keydown="clearLoginError()">
                  </v-text-field>
                </v-row>
                <v-row>
                  <v-text-field label="Password"
                                type="password"
                                required
                                v-model="login.password"
                                v-on:keydown="clearLoginError()">
                  </v-text-field>
                </v-row>
                <v-row>
                  <v-alert  dense
                            outlined
                            type="error"
                            v-show="login.isLoginError">
                    Username or password is <strong>invalid</strong>!
                  </v-alert>
                </v-row>
              </v-container>
            </v-card-text>
            <v-card-actions>
              <v-spacer></v-spacer>
              <v-btn  color="accent"
                      text
                      @click="userLogin()">
                Login
              </v-btn>
              <v-btn  color="accent"
                      text
                      @click="login.isLoginDialogOpen = false">
                Cancel
              </v-btn>
            </v-card-actions>
          </v-card>

          <v-card v-show="isUserLoggedIn()">
            <v-card-title>
              <span class="text-h5">Are you sure you want to logout?</span>
            </v-card-title>
            <v-card-text>
              <v-container>
                
              </v-container>
            </v-card-text>
            <v-card-actions>
              <v-spacer></v-spacer>
              <v-btn  color="accent"
                      text
                      @click="userLogout()">
                Yes
              </v-btn>
              <v-btn  color="accent"
                      text
                      @click="login.isLoginDialogOpen = false">
                No
              </v-btn>
            </v-card-actions>
          </v-card>

        </v-dialog>
        

      </v-app-bar>








      <v-navigation-drawer  id ="navigation-drawer"
                            app
                            clipped
                            permanent
                            v-show="false">
        
        <v-treeview id="climate-just-treewview"
                    activatable
                    :active.sync="selectedField"
                    dense
                    hoverable
                    :items="treeViewItems"
                    :open.sync="openedFolders"
                    open-on-click
                    @update:active="updateMap()"
                    v-show="false">
          <template v-slot:prepend="{ item, active, open }">
            <v-icon v-if="item.isFolder">
              {{ open ? 'mdi-folder-open-outline' : 'mdi-folder-outline' }}
            </v-icon>
            <v-icon v-else>
              {{ active ? 'mdi-radiobox-marked' : 'mdi-radiobox-blank' }}
            </v-icon>
          </template>
        </v-treeview>

      </v-navigation-drawer>

      <v-main id="main"
              app>

        <div id="map"></div>

      </v-main>

      <v-footer  id="footer"
                 color="orange"
                 app>

        <p>This is the footer of the application. It can be removed.</p>

      </v-footer>
    </v-app>

  </div>

  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.2/leaflet.js"></script>
  <script type="text/javascript" src="libs/choropleth-1.0.0/choropleth.js"></script>
  
  <script type="text/javascript" src="data/app-data.js"></script>
  <!-- <script type="text/javascript" src="data/app-data-hub-apps.js"></script> -->
  <!-- <script type="text/javascript" src="data/app-data-map.js"></script> -->

  <script type="text/javascript" src="js/index.js"></script>

</body>
</html>